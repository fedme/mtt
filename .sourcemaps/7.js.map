{"version":3,"sources":["../../src/pages/registration/registration.module.ts","../../src/pages/registration/registration.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RegistrationPage } from './registration';\n\n@NgModule({\n  declarations: [\n    RegistrationPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RegistrationPage),\n    TranslateModule.forChild()\n  ],\n})\nexport class RegistrationPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/registration/registration.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, ModalController } from 'ionic-angular';\nimport { Stimuli, Data } from '../../providers/providers';\nimport { TranslateService } from '@ngx-translate/core';\n\n@IonicPage({\n  priority: 'high'\n})\n@Component({\n  selector: 'page-registration',\n  templateUrl: 'registration.html',\n})\nexport class RegistrationPage {\n\n  isActiveOnlyVersion: boolean = false;\n  lang: string = \"en\";\n  availableLangs: string[];\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private stimuli: Stimuli, \n    private data: Data, private toastCtrl: ToastController, private translate: TranslateService,\n    private modalCtrl: ModalController) {\n\n      // Parse available langs\n      this.availableLangs = this.translate.langs;\n      console.log('available langs: ', this.availableLangs);\n\n      // Get if active-only-version from localStorage\n      if (localStorage.getItem('active-only-version') != null && localStorage.getItem('active-only-version') != '') {\n        this.isActiveOnlyVersion = localStorage.getItem('active-only-version') == 'true';\n      }\n      \n      // Initialize providers\n      this.stimuli.initialize();\n      this.data.initialize();\n\n      // Get language from localStorage\n      if (localStorage.getItem('lang') != null && localStorage.getItem('lang') != '') {\n        this.lang = localStorage.getItem('lang');\n      }\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad RegistrationPage');\n    if (this.parseUrlParams()) {\n      console.log(\"participant:\", this.stimuli.participant);\n      this.navCtrl.push('ConsentFormPage');\n    }\n  }\n\n  handleRegistration() {\n    if (this.validateRegistration()) {\n      // Remember if active-only version\n      localStorage.setItem('active-only-version', this.isActiveOnlyVersion ? 'true' : 'false');\n\n      // set Language\n      this.stimuli.setLang(this.lang);\n      localStorage.setItem('lang', this.lang);\n   \n      // initialize stimuli\n      this.stimuli.onAferRegistration(this.isActiveOnlyVersion);\n      this.navCtrl.push('TrainingInstructionsPage');\n    }\n  }\n\n  validateRegistration() {\n    const ageNull = this.stimuli.participant.age == null;\n    if (ageNull) {\n      let toast = this.toastCtrl.create({\n        message: 'Please enter participant age',\n        duration: 3000\n      });\n      toast.present();\n      return false;\n    }\n    return true;\n  }\n\n  showRecords() {\n    let recordsModal = this.modalCtrl.create(\"ViewRecordsPage\");\n    recordsModal.present();\n  }\n\n  parseUrlParams() {\n    let codeProvided = false;\n    if (document.URL.indexOf(\"?\") > 0) {\n      let splitURL = document.URL.split(\"?\");\n      let splitParams = splitURL[1].split(\"&\");\n      let i: any;\n      for (i in splitParams){\n        let singleURLParam = splitParams[i].split('=');\n        if (singleURLParam[0] == \"participant_code\"){\n          this.stimuli.participant.code = singleURLParam[1];\n          codeProvided = true;\n        }\n        else if (singleURLParam[0] == \"workerId\"){\n          this.stimuli.participant.code = singleURLParam[1];\n          codeProvided = true;\n        }\n        else if (singleURLParam[0] == \"participant_age\"){\n          this.stimuli.participant.age = parseInt(singleURLParam[1]);\n        }\n        else if (singleURLParam[0] == \"participant_grade\"){\n          this.stimuli.participant.grade = parseInt(singleURLParam[1]);\n        }\n        else if (singleURLParam[0] == \"condition\"){\n          this.stimuli.conditionCounterOverride = parseInt(singleURLParam[1]);\n          this.stimuli.pickCondition();\n          console.log(\"[param][conditionCounterOverride]\", parseInt(singleURLParam[1]));\n          console.log( this.stimuli.conditionCounterOverride);\n        }\n      }\n    }\n    this.stimuli.onlineVersion = codeProvided != false;\n    return codeProvided;\n  }\n \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/registration/registration.ts"],"sourceRoot":""}